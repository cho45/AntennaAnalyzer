<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/iron-icons/device-icons.html">
<link rel="import" href="../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../bower_components/paper-item/paper-icon-item.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-menu/paper-submenu.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">

<dom-module id="my-app">
	<style is="custom-style">
		:host {
			@apply(--paper-font-common-base);
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
			cursor: default;
			display: block;
			margin: 0 auto;
		}

		[disabled] {
			opacity: 0.3;
		}

		[hide] {
			display: none;
		}


		.nav {
			border-right: 1px solid #ccc;
			font-size: 17px;
		}

		.nav paper-menu paper-submenu paper-menu {
			padding-left: 16px;
		}

		table.versions {
		}

		table.versions th ,
		table.versions td {
			text-align: left;
			padding-right: 8px;
		}

		.main {
			background-color: #eee;
		}

		paper-toolbar {
			/* background-color: #00bcd4; */
			background: var(--paper-blue-grey-100);
			color: #000;
		}

		paper-toolbar::shadow #topBar {
			padding: 0 16px 0 0;
		}

		paper-toolbar paper-icon-button[icon=menu] {
			margin-left: 16px;
		}

		paper-tabs {
			background-color: #00bcd4;
			color: #fff;
		}

		paper-tabs iron-icon {
			margin: 5px;
		}

		paper-button {
			font-size: 12px;
			background: var(--paper-grey-100);
		}

	</style>

	<template>

		<paper-drawer-panel id="drawerPanel" responsive-width="1600px">

			<div class="nav" drawer style="height: 100%; overflow-y: auto">
				<div class="menu-title" style="padding: 0 16px">
					<h1>
						<!--
						<img src="assets/icon-192.png" style="width: 1em; height: 1em; vertical-align: text-top"/>
						-->
						AntennaAnalyzer</h1>
				</div>
				<paper-menu selected="{{selectedMenu}}">
					<paper-submenu opened>
						<paper-item class="menu-trigger">Measure</paper-item>
						<paper-menu class="menu-content">
							<template is="dom-repeat" items="{{bands}}">
								<paper-item on-tap="bandSelect" data-start$="{{item.start}}" data-stop$="{{item.stop}}">{{item.name}}</paper-item>
							</template>
						</paper-menu>
					</paper-submenu>
					<paper-item>Settings</paper-item>
				</paper-menu>
				<div style="color: #bdbdbd; padding: 8px 16px; border-top: 1px solid #ddd">
					<table class="versions">
						<tr>
							<th colspan="2">Versions</th>
						</tr>
						<tr>
							<th>server</th>
							<td>{{conditional(serverVersion, serverVersion, "(unconnected)")}}</td>
						</tr>
						<tr>
							<th>client</th>
							<td>{{conditional(clientVersion, clientVersion, "(unknown)")}}</td>
						</tr>
					</table>
				</div>
			</div>

			<paper-header-panel class="main" main mode="waterfall">
				<paper-toolbar>
					<paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
					<div id="status" class="title" class$="{{sprintf('title %s', status.state)}}">
						<iron-icon icon="{{conditional(isConnected, 'image:flash-on', 'image:flash-off')}}"></iron-icon>
						<span>{{status.state}}</span>
					</div>
					<div class="flex">
					</div>

					<div id="progressBar" class="bottom fit"></div>
				</paper-toolbar>

				<iron-pages class="content fit" selected="{{selectedMenu}}">
					<div id="mainContent" class="fit layout vertical" style="background: #fff">
						<div class="flex relative" style="height: 600px">
							<div class="fit">
								<canvas id="canvas" width="800" height="600" style="outline: 1px solid #ccc; width: 100%; height: 100%"></canvas>
							</div>
						</div>
					</div><!-- #mainContent -->

					<div id="settingsContent" class="fit layout vertical" style="background: #fff; padding: 0 16px">
						<paper-tabs class="" selected="{{settingsTab}}" noink no-slide style="margin: 0 -16px">
							<paper-tab>Connection</paper-tab>
						</paper-tabs>
						<div class="body flex relative">
							<iron-pages class="fit flex layout vertical relative" selected="{{settingsTab}}">
								<!-- Connection -->
								<div class="flex vertical">
									<h3>Bluetooth</h3>
									<paper-input label="Server Address" placeholder="ws://" value="{{settings.grblServer.address}}" disabled="{{settings.grblServer.addressAuto}}"></paper-input>
									<paper-checkbox checked="{{settings.grblServer.addressAuto}}">Automatic</paper-checkbox>
								</div>
								<!-- /Connection -->
							</iron-pages>

							<iron-localstorage
								name="antennaanalyzer-settings"
								value="{{settings}}"
								on-iron-localstorage-load-empty="initializeDefaultSettings"
								></iron-localstorage>
						</div>
					</div>
					<!-- #/settingsContent -->

				</iron-pages>
			</paper-header-panel>

		</paper-drawer-panel>

		<paper-toast id="feedback" duration="10000"></paper-toast>
	</template>
</dom-module>

<script src="app.js"></script>
